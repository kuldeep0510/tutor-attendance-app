{
  "buildCommand": "npm run build",
  "outputDirectory": ".next",
  "framework": "nextjs",
  "regions": ["bom1"],
  "env": {
    "NEXT_PUBLIC_SUPABASE_URL": "${NEXT_PUBLIC_SUPABASE_URL}",
    "NEXT_PUBLIC_SUPABASE_ANON_KEY": "${NEXT_PUBLIC_SUPABASE_ANON_KEY}",
    "NEXT_PUBLIC_WHATSAPP_SERVER_URL": "${NEXT_PUBLIC_WHATSAPP_SERVER_URL}"
  },
  "rewrites": [
    {
      "source": "/api/whatsapp/:path*",
      "destination": "${NEXT_PUBLIC_WHATSAPP_SERVER_URL}/whatsapp/:path*"
    },
    {
      "source": "/whatsapp-api/:path*",
      "destination": "https://whatsapp-server-4q9w.onrender.com/:path*"
    },
    {
      "source": "/api/:path*",
      "destination": "/api/:path*"
    }
  ],
  "ignoreCommand": "git diff --quiet HEAD^ HEAD ./package-lock.json"
}
